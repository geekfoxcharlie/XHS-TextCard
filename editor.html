<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>工作台 | XHS-TextCard - 小红书智能文字排版工具</title>
    <meta name="description" content="XHS-TextCard 创作工作台：专为小红书设计的在线文字排版工具。支持 Markdown 实时解析、智能分页、多种设计模板与防盗水印，助您高效制作高质量小红书文字卡片。">
    <meta name="keywords" content="小红书工作台,在线排版,文字转图片工具,XHS-TextCard编辑器,小红书笔记制作">
    <meta name="author" content="geekfoxcharlie">
    <link rel="canonical" href="https://www.xhs-textcard.site/editor.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.xhs-textcard.site/editor.html">
    <meta property="og:title" content="创作工作台 | XHS-TextCard - 小红书智能文字排版工具">
    <meta property="og:description" content="立即在 XHS-TextCard 工作台开始您的创作。支持智能分页、Markdown 与自定义品牌签名。">
    <meta property="og:image" content="https://www.xhs-textcard.site/rednote.png">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "XHS-TextCard 工作台",
      "description": "XHS-TextCard 的核心创作工具，支持将 Markdown 文字转化为精美的小红书卡片。",
      "breadcrumb": {
        "@type": "BreadcrumbList",
        "itemListElement": [{
          "@type": "ListItem",
          "position": 1,
          "name": "首页",
          "item": "https://www.xhs-textcard.site/"
        },{
          "@type": "ListItem",
          "position": 2,
          "name": "工作台",
          "item": "https://www.xhs-textcard.site/editor.html"
        }]
      }
    }
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@15.0.0/lib/marked.umd.min.js"></script>
    <!-- Pickr -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/monolith.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/pickr.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- 字体库 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zyitong/smiley-sans@v1.1.1/dist/smiley-sans.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Sans+SC:wght@400;700&family=Noto+Serif+SC:wght@400;700&family=ZCOOL+KuaiLe&family=ZCOOL+QingKe+HuangYou&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/pages/editor.css">
</head>
<body class="editor-page">
    <div class="main-container">
        <!-- 左侧：输入区域 -->
        <div class="left-panel">
            <div class="panel-header">
                <a href="index.html" class="btn-icon-text" title="返回主页">
                    <i class="fas fa-home"></i>
                </a>
                <div>工作台</div>
            </div>
            <div class="input-section">
                <div class="section-title">
                    <i class="fas fa-edit"></i>
                    输入文字
                    <div class="help-trigger" id="syntax-help-trigger" role="button" aria-label="语法速查" aria-expanded="false" aria-controls="syntax-help-tooltip">
                        <i class="far fa-question-circle" aria-hidden="true"></i>
                        <div class="help-tooltip" id="syntax-help-tooltip" role="tooltip">
                            <div class="help-title">语法速查</div>
                            <ul class="help-list">
                                <li><span># 标题</span> <span>一级标题</span></li>
                                <li><span>## 标题</span> <span>二级标题</span></li>
                                <li><span>---</span> <span>分割线 (强制分页)</span></li>
                                <li><span>**文本**</span> <span>加粗</span></li>
                                <li><span>*文本*</span> <span>斜体</span></li>
                                <li><span>~~文本~~</span> <span>删除线</span></li>
                                <li><span>==文本==</span> <span>高亮</span></li>
                                <li><span>> 文本</span> <span>引用</span></li>
                                <li><span>`文本`</span> <span>行内代码</span></li>
                                <li><span>- 列表</span> <span>无序列表</span></li>
                                <li><span>1. 列表</span> <span>有序列表</span></li>
                                <li><span>↵↵</span> <span>双回车 (建议分页点)</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <textarea id="text-input"></textarea>
            </div>
        </div>

        <!-- 中间：预览区域 -->
        <div class="preview-panel">
            <div class="preview-header">
                <div class="preview-title">预览</div>
                <div class="preview-count" id="preview-count">共 0 张图片</div>
            </div>
            <div class="preview-container">
                <button class="preview-nav prev" id="preview-prev" title="上一张">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="preview-list" id="preview-list">
                    <div class="empty-state">
                        <div class="empty-state-icon">📝</div>
                        <div>输入文字并选择模板后将自动生成预览</div>
                    </div>
                </div>
                <button class="preview-nav next" id="preview-next" title="下一张">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <div class="preview-indicators" id="preview-indicators"></div>
            </div>
            <div class="loading" id="loading">生成中...</div>
        </div>

        <!-- 右侧1：模板选择 -->
        <div class="template-panel">
            <div class="template-selector">
                <div class="section-title">
                    <i class="fas fa-palette"></i>
                    选择模板
                </div>
                <div class="template-categories">
                    <button class="template-category active" data-category="featured">推荐模板</button>
                </div>
                <div class="template-list" id="template-list">
                    <!-- 模板列表将通过 JavaScript 动态生成 -->
                </div>
            </div>
            
            <div class="download-section">
                <button class="btn btn-primary" id="download-all-btn" disabled>
                    <i class="fas fa-download"></i>
                    打包下载全部图片
                </button>
            </div>
        </div>

        <!-- 右侧2：模板编辑器 -->
        <div class="editor-panel">
            <div class="editor-section">
                <div class="section-title">
                    <i class="fas fa-tools"></i>
                    样式调整
                </div>
                <div class="editor-tabs">
                    <button class="editor-tab active" data-tab="visual">
                        <i class="fas fa-magic"></i>
                        基础配置
                    </button>
                </div>

                <!-- 可视化编辑器 -->
                <div class="editor-content active" id="visual-editor">
                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-magic"></i> 背景模式
                        </label>
                        <div class="bg-mode-selector">
                            <button class="bg-mode-btn active" data-mode="solid" title="纯色">
                                <i class="fas fa-square"></i>
                            </button>
                            <button class="bg-mode-btn" data-mode="gradient" title="渐变">
                                <i class="fas fa-layer-group"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-fill-drip"></i> 背景颜色 / 渐变
                        </label>
                        <div class="color-presets" id="bg-color-presets" role="group" aria-label="背景颜色选择">
                            <!-- 纯色预设 (莫兰迪色系) -->
                            <div class="solid-presets">
                                <div class="color-preset" data-color="#ffffff" title="纯白" role="button" aria-label="白色背景" tabindex="0"></div>
                                <div class="color-preset" data-color="#E8D5C4" title="浅杏" role="button" aria-label="浅杏色背景" tabindex="0"></div>
                                <div class="color-preset" data-color="#B5C0D0" title="灰蓝" role="button" aria-label="灰蓝色背景" tabindex="0"></div>
                                <div class="color-preset" data-color="#CCD3CA" title="豆沙绿" role="button" aria-label="豆沙绿色背景" tabindex="0"></div>
                                <div class="color-preset" data-color="#F5E8DD" title="浅咖" role="button" aria-label="浅咖色背景" tabindex="0"></div>
                                <div class="color-preset" data-color="#9290C3" title="莫兰紫" role="button" aria-label="莫兰紫色背景" tabindex="0"></div>
                                <div class="color-preset" data-color="#7C9D96" title="灰绿" role="button" aria-label="灰绿色背景" tabindex="0"></div>
                                <div class="color-preset" data-color="#1a1a1b" title="暗黑" role="button" aria-label="暗黑色背景" tabindex="0"></div>
                            </div>
                            <!-- 渐变预设 (初始隐藏) -->
                            <div class="gradient-presets">
                                <div class="color-preset" style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)" data-color="linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)" title="晨曦" role="button" aria-label="晨曦渐变" tabindex="0"></div>
                                <div class="color-preset" style="background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%)" data-color="linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%)" title="晴空" role="button" aria-label="晴空渐变" tabindex="0"></div>
                                <div class="color-preset" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)" data-color="linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)" title="蜜桃" role="button" aria-label="蜜桃渐变" tabindex="0"></div>
                                <div class="color-preset" style="background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%)" data-color="linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%)" title="梦幻" role="button" aria-label="梦幻渐变" tabindex="0"></div>
                                <div class="color-preset" style="background: linear-gradient(135deg, #fdfcfb 0%, #e2d1c3 100%)" data-color="linear-gradient(135deg, #fdfcfb 0%, #e2d1c3 100%)" title="木质" role="button" aria-label="木质渐变" tabindex="0"></div>
                                <div class="color-preset" style="background: linear-gradient(135deg, #cfd9df 0%, #e2ebf0 100%)" data-color="linear-gradient(135deg, #cfd9df 0%, #e2ebf0 100%)" title="素雅" role="button" aria-label="素雅渐变" tabindex="0"></div>
                            </div>
                            <div class="color-picker-wrapper" id="bg-color-picker-container">
                                <div id="bg-color-picker"></div>
                                <i class="fas fa-plus"></i>
                            </div>
                        </div>
                    </div>

                    <!-- 渐变配置面板 (初始隐藏) -->
                    <div id="gradient-editor-panel" class="editor-popup">
                        <div class="popup-header">
                            <span>渐变设置</span>
                            <i class="fas fa-times close-popup"></i>
                        </div>
                        <div class="form-group popup-form-group">
                            <label class="form-label">起始颜色</label>
                            <div id="gradient-start-picker"></div>
                        </div>
                        <div class="form-group popup-form-group">
                            <label class="form-label">结束颜色</label>
                            <div id="gradient-end-picker"></div>
                        </div>
                        <div class="form-group popup-form-group">
                            <label class="form-label">
                                角度
                                <span class="form-range-value" id="gradient-angle-value">135deg</span>
                            </label>
                            <input type="range" class="form-range" id="gradient-angle" min="0" max="360" value="135">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-font"></i> 文字颜色配置
                        </label>
                        
                        <div style="margin-bottom: 15px;">
                            <label class="form-label small-label" style="margin-bottom: 8px; font-size: 12px; color: #666;">正文颜色</label>
                            <div class="color-presets" id="text-color-presets" role="group" aria-label="文字颜色选择">
                                <div class="color-preset" style="background-color: #333333" data-color="#333333" title="深灰" role="button" aria-label="深灰色文字" tabindex="0"></div>
                                <div class="color-preset" style="background-color: #000000" data-color="#000000" title="纯黑" role="button" aria-label="黑色文字" tabindex="0"></div>
                                <div class="color-preset" style="background-color: #495057" data-color="#495057" title="中灰" role="button" aria-label="中灰色文字" tabindex="0"></div>
                                <div class="color-preset" style="background-color: #1c7ed6" data-color="#1c7ed6" title="极光蓝" role="button" aria-label="极光蓝色文字" tabindex="0"></div>
                                <div class="color-preset" style="background-color: #d6336c" data-color="#d6336c" title="玫瑰红" role="button" aria-label="玫瑰红色文字" tabindex="0"></div>
                                <div class="color-preset" style="background-color: #37b24d" data-color="#37b24d" title="森林绿" role="button" aria-label="森林绿色文字" tabindex="0"></div>
                                <div class="color-preset" style="background-color: #f08c00" data-color="#f08c00" title="琥珀橙" role="button" aria-label="琥珀色文字" tabindex="0"></div>
                                <div class="color-preset" style="background-color: #ffffff" data-color="#ffffff" title="纯白" role="button" aria-label="白色文字" tabindex="0"></div>
                                <div class="color-picker-wrapper">
                                    <div id="text-color-picker"></div>
                                    <i class="fas fa-plus"></i>
                                </div>
                            </div>
                        </div>

                        <div class="form-row" style="align-items: center; justify-content: space-between;">
                            <label class="form-label small-label" style="margin: 0; font-size: 12px; color: #666;">强调颜色</label>
                            <div class="color-picker-wrapper small" title="强调色 (用于加粗/高亮/装饰)">
                                <div id="accent-color-picker"></div>
                                <i class="fas fa-palette"></i>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <span><i class="fas fa-text-height"></i> 字体大小</span>
                            <span class="form-range-value" id="font-size-value">16px</span>
                        </label>
                        <input type="range" class="form-range" id="font-size" min="12" max="32" value="16">
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <span><i class="fas fa-arrows-alt-v"></i> 行高</span>
                            <span class="form-range-value" id="line-height-value">1.8</span>
                        </label>
                        <input type="range" class="form-range" id="line-height" min="1.2" max="3" step="0.1" value="1.8">
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <span><i class="fas fa-arrows-alt-h"></i> 字间距</span>
                            <span class="form-range-value" id="letter-spacing-value">0.5px</span>
                        </label>
                        <input type="range" class="form-range" id="letter-spacing" min="0" max="3" step="0.1" value="0.5">
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <span><i class="fas fa-compress-alt"></i> 内边距</span>
                            <span class="form-range-value" id="text-padding-value">40px</span>
                        </label>
                        <input type="range" class="form-range" id="text-padding" min="20" max="80" step="5" value="40">
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-font"></i> 字体族
                        </label>
                        <select class="form-input" id="font-family">
                            <option value="-apple-system, BlinkMacSystemFont, 'SF Pro Text', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif" selected>苹方 / 系统默认 (简约)</option>
                            <option value="'Smiley Sans', sans-serif">得意黑 (潮流时尚)</option>
                            <option value="'LXGW WenKai Screen', sans-serif">霞鹜文楷 (文艺书卷)</option>
                            <option value="'Noto Serif SC', serif">思源宋体 (优雅大气)</option>
                            <option value="'Noto Sans SC', sans-serif">思源黑体 (标准清晰)</option>
                            <option value="'ZCOOL QingKe HuangYou', cursive">站酷黄油体 (创意趣味)</option>
                            <option value="'ZCOOL KuaiLe', cursive">站酷快乐体 (活泼灵动)</option>
                            <option value="'Ma Shan Zheng', cursive">马善政毛笔 (艺术书法)</option>
                            <option value="'STKaiti', 'KaiTi', serif">楷体 (经典传承)</option>
                        </select>
                    </div>

                    <!-- 标题样式配置 -->
                    <div class="form-group" style="margin-top: 20px; padding-top: 15px; border-top: 1px dashed var(--color-border);">
                        <label class="form-label" style="margin-bottom: 15px;">
                            <i class="fas fa-heading"></i> 标题字号
                        </label>
                        
                        <div class="form-group" style="margin-top: 10px;">
                            <label class="form-label small-label">
                                <span>一级标题 (H1) 字号倍率</span>
                                <span class="form-range-value" id="h1-scale-value">1.6x</span>
                            </label>
                            <input type="range" class="form-range" id="h1-scale" min="1.0" max="5.0" step="0.1" value="1.6">
                        </div>

                        <div class="form-group">
                            <label class="form-label small-label">
                                <span>二级标题 (H2) 字号倍率</span>
                                <span class="form-range-value" id="h2-scale-value">1.4x</span>
                            </label>
                            <input type="range" class="form-range" id="h2-scale" min="1.0" max="4.0" step="0.1" value="1.4">
                        </div>

                        <div class="form-group">
                            <label class="form-label small-label">
                                <span>三级标题 (H3) 字号倍率</span>
                                <span class="form-range-value" id="h3-scale-value">1.2x</span>
                            </label>
                            <input type="range" class="form-range" id="h3-scale" min="1.0" max="3.0" step="0.1" value="1.2">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <span><i class="fas fa-stamp"></i> 背景水印</span>
                            <label class="switch">
                                <input type="checkbox" id="has-watermark" aria-label="启用背景水印">
                                <span class="slider round"></span>
                            </label>
                        </label>
                        <div class="form-row watermark-options">
                            <div class="form-col">
                                <input type="text" class="form-input" id="watermark-text" placeholder="水印文字 (如: @我的账号)">
                            </div>
                            <div class="form-col watermark-color-col">
                                <div class="color-picker-wrapper small" title="水印颜色">
                                    <div id="watermark-color-picker"></div>
                                    <i class="fas fa-palette"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <span><i class="fas fa-signature"></i> 签名栏</span>
                            <label class="switch">
                                <input type="checkbox" id="has-signature" aria-label="启用签名栏">
                                <span class="slider round"></span>
                            </label>
                        </label>
                        <div id="signature-options">
                            <div class="form-row">
                                <div class="form-col">
                                    <input type="text" class="form-input" id="signature-text" placeholder="签名内容 (如: 我的名字)">
                                </div>
                                <div class="form-col signature-color-col">
                                    <div class="color-picker-wrapper small" title="签名颜色">
                                        <div id="signature-color-picker"></div>
                                        <i class="fas fa-palette"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                        <label class="form-label">
                            <span><i class="fas fa-th"></i> 网格辅助线</span>
                            <label class="switch">
                                <input type="checkbox" id="show-grid" aria-label="显示网格辅助线">
                                <span class="slider round"></span>
                            </label>
                        </label>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-secondary" id="reset-template-btn">
                            <i class="fas fa-undo"></i>
                            重置
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript 模块 -->
    <script src="js/constants.js"></script>
    <script src="js/utils/markdown.js"></script>
    <script src="js/utils/canvas-text-engine.js"></script>
    <script src="js/utils/canvas-utils.js"></script>
    <script src="js/TemplateDefinitions.js"></script>
    <script src="js/CanvasRenderer.js"></script>
    <script src="js/TemplateManager.js"></script>
    <script src="js/TextSplitter.js"></script>
    <script src="js/PreviewGenerator.js"></script>
    <script src="js/DownloadManager.js"></script>
    <script src="js/EditorController.js"></script>
    <script src="js/App.js"></script>
</body>
</html>
